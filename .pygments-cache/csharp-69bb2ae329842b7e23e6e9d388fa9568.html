<div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.Remoting</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.Remoting.Channels</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.Remoting.Channels.Tcp</span><span class="p">;</span>


<span class="k">namespace</span> <span class="nn">RemotingSample</span>
<span class="p">{</span>
  <span class="k">class</span> <span class="nc">Client</span>
  <span class="p">{</span>
    <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// create and register the TCP channel</span>
      <span class="c1">// please note that I have set the security of the channel to false</span>
      <span class="n">TcpChannel</span> <span class="n">clientRemotingChannel</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TcpChannel</span><span class="p">();</span>
      <span class="n">ChannelServices</span><span class="p">.</span><span class="n">RegisterChannel</span><span class="p">(</span><span class="n">clientRemotingChannel</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>

      <span class="c1">// create an object of type RemothMath</span>
      <span class="c1">// we have to do a cast because Activator.GetObject returns an object (doh)</span>
      <span class="c1">// type is RemoteMath and server address is what we created in Server.cs (port:8888 and rMath)</span>

      <span class="c1">// Server.cs code:</span>
      <span class="c1">// TcpChannel remotingChannel = new TcpChannel(8888);</span>
      <span class="c1">// ChannelServices.RegisterChannel(remotingChannel, false);</span>
      <span class="c1">// WellKnownServiceTypeEntry remoteObject = new WellKnownServiceTypeEntry(typeof(RemoteMath), &quot;rMath&quot;, WellKnownObjectMode.SingleCall);</span>

      <span class="n">RemoteMath</span> <span class="n">remoteMathObject</span> <span class="p">=</span> <span class="p">(</span><span class="n">RemoteMath</span><span class="p">)</span><span class="n">Activator</span><span class="p">.</span><span class="n">GetObject</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">RemoteMath</span><span class="p">),</span> <span class="s">&quot;tcp://localhost:8888/rMath&quot;</span><span class="p">);</span>

      <span class="c1">// now we can call Add and Sub functions</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Result of Add(1, 2): {0}&quot;</span><span class="p">,</span> <span class="n">remoteMathObject</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">));</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Result of Sub(10, 3): {0}&quot;</span><span class="p">,</span> <span class="n">remoteMathObject</span><span class="p">.</span><span class="n">Sub</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">3</span><span class="p">));</span>

      <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Press any key to exit&quot;</span><span class="p">);</span>
      <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>