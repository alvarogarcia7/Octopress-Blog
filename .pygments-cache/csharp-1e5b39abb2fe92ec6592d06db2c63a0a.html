<div class="highlight"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.Remoting</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.Remoting.Channels</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Runtime.Remoting.Channels.Tcp</span><span class="p">;&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">namespace</span> <span class="nn">RemotingSample</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Server</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// create a TCP channel and bind it to port 8888</span>
            <span class="n">TcpChannel</span> <span class="n">remotingChannel</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TcpChannel</span><span class="p">(</span><span class="m">8888</span><span class="p">);&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">pre</span><span class="p">&gt;&lt;</span><span class="n">code</span><span class="p">&gt;</span>        <span class="c1">// register the channel, the second parameter is ensureSecurity</span>
        <span class="c1">// I have set it to false to disable encryption and signing</span>
        <span class="c1">// for more information see section Remarks in https://msdn.microsoft.com/en-us/library/ms223155(v=vs.90).aspx</span>
        <span class="n">ChannelServices</span><span class="p">.</span><span class="n">RegisterChannel</span><span class="p">(</span><span class="n">remotingChannel</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>

        <span class="c1">// create a new servicetype of type RemoteMath named &quot;rMath&quot; and of type SingleCall</span>
        <span class="c1">// SingleCall: a new object will be created for each call</span>
        <span class="c1">// as opposed to WellKnownObjectMode.Singleton where there is one object for all calls (and clients)</span>
        <span class="n">WellKnownServiceTypeEntry</span> <span class="n">remoteObject</span> <span class="p">=</span> <span class="k">new</span> <span class="n">WellKnownServiceTypeEntry</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">RemoteMath</span><span class="p">),</span> <span class="s">&quot;rMath&quot;</span><span class="p">,</span> <span class="n">WellKnownObjectMode</span><span class="p">.</span><span class="n">SingleCall</span><span class="p">);</span>

        <span class="c1">// register the remoteObject servicetype</span>
        <span class="n">RemotingConfiguration</span><span class="p">.</span><span class="n">RegisterWellKnownServiceType</span><span class="p">(</span><span class="n">remoteObject</span><span class="p">);</span>

        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Registered service&quot;</span><span class="p">);</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Press any key to exit&quot;</span><span class="p">);</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span> <span class="p">}</span> 
</pre></div>